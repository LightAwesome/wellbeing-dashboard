<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Smart Wellbeing Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      padding: 20px;
      color: #263238;
      background: linear-gradient(to bottom right, #e3f2fd, #fce4ec);
      transition: background 0.5s ease;
    }
    h1 {
      text-align: center;
      color: #00796b;
      margin-bottom: 10px;
      animation: fadeInDown 1s ease;
    }
    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }
    .section {
      background: #ffffff;
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.05);
      min-height: 200px;
      animation: fadeInUp 0.8s ease;
    }
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes fadeInDown {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .emoji-button {
      font-size: 28px;
      margin: 10px;
      cursor: pointer;
      transition: transform 0.2s;
    }
    .emoji-button:hover {
      transform: scale(1.3);
    }
    .checkbox-group label {
      display: block;
      padding: 8px;
      border: 1px solid #cfd8dc;
      border-radius: 10px;
      margin-bottom: 10px;
      background: #e0f7fa;
    }
    .affirmation-box, .quote-box, .goal-box, .calendar-note, .encouragement-box, 
    .weather-box, .focus-box, .energy-box, .winddown-box {
      margin-top: 10px;
      padding: 12px;
      border-radius: 12px;
      font-style: italic;
      color: #444;
    }
    .affirmation-box { background: #ffe082; }
    .quote-box { background: #fff59d; border-left: 6px solid #fdd835; }
    .goal-box { background: #c8e6c9; border: 1px solid #81c784; }
    .calendar-note { background: #dcedc8; color: #558b2f; }
    .encouragement-box { background: #e1bee7; color: #6a1b9a; }
    .weather-box { background: #b3e5fc; color: #0277bd; }
    .focus-box { background: #fff9c4; color: #fbc02d; }
    .energy-box { background: #f8bbd0; color: #c2185b; }
    .winddown-box { background: #d7ccc8; color: #4e342e; }
    button {
      padding: 12px 24px;
      border: none;
      background-color: #00796b;
      color: white;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #004d40;
    }
    textarea {
      width: 100%;
      height: 100px;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 14px;
    }
    .breathe-box {
      text-align: center;
      margin-top: 20px;
      padding: 10px;
    }
    .circle {
      width: 100px;
      height: 100px;
      margin: 20px auto;
      border-radius: 50%;
      background-color: #ce93d8;
      animation: breathe 4s infinite ease-in-out;
    }
    @keyframes breathe {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.4); }
    }
    /* Weather-based animations */
    .rain-animation {
      animation: rainEffect 2s infinite;
    }
    @keyframes rainEffect {
      0% { transform: translateY(0px); opacity: 1; }
      50% { transform: translateY(5px); opacity: 0.8; }
      100% { transform: translateY(0px); opacity: 1; }
    }
    .cloud-animation {
      animation: cloudDrift 5s infinite linear;
    }
    @keyframes cloudDrift {
      0% { transform: translateX(0px); }
      50% { transform: translateX(10px); }
      100% { transform: translateX(0px); }
    }
    .sunshine-animation {
      animation: sunshineGlow 3s infinite alternate;\n}\n@keyframes sunshineGlow {\n  from { filter: brightness(1); }\n  to { filter: brightness(1.2); }\n}\n  </style>\n</head>\n<body>\n  <h1>My Smart Wellbeing Dashboard</h1>\n  <div class=\"dashboard-grid\">\n    <div class=\"section\">\n      <h2 id=\"greeting\">Loading greeting...</h2>\n      <div class=\"focus-box\" id=\"focusBox\">üéØ Your daily focus will appear here.</div>\n      <div class=\"weather-box\" id=\"weatherTip\">üå§Ô∏è Weather insights loading...</div>\n      <div class=\"energy-box\" id=\"energyEstimate\">‚ö° Estimated energy will be shown here.</div>\n    </div>\n    <div class=\"section\">\n      <h2>Mood Tracker</h2>\n      <div style=\"text-align:center;\">\n        <span class=\"emoji-button\" onclick=\"selectMood('üòä')\">üòä</span>\n        <span class=\"emoji-button\" onclick=\"selectMood('üòê')\">üòê</span>\n        <span class=\"emoji-button\" onclick=\"selectMood('üò¢')\">üò¢</span>\n        <span class=\"emoji-button\" onclick=\"selectMood('üò†')\">üò†</span>\n        <span class=\"emoji-button\" onclick=\"selectMood('üò¥')\">üò¥</span>\n      </div>\n      <p id=\"selectedMood\">Your selected mood will appear here.</p>\n      <div class=\"encouragement-box\" id=\"emotionSupport\">üí¨ Mood reflection will show here.</div>\n    </div>\n    <div class=\"section\">\n      <h2>Daily Self-Care</h2>\n      <div class=\"checkbox-group\" onchange=\"updateEncouragement()\">\n        <label><input type=\"checkbox\"> Drank enough water</label>\n        <label><input type=\"checkbox\"> Got some movement</label>\n        <label><input type=\"checkbox\"> Took 5 deep breaths</label>\n        <label><input type=\"checkbox\"> Unplugged from screen</label>\n      </div>\n      <div class=\"encouragement-box\" id=\"encouragement\">üß† Your encouragement feedback will appear here.</div>\n    </div>\n    <div class=\"section\">\n      <h2>Affirmation</h2>\n      <button onclick=\"generateAffirmation()\">Inspire Me</button>\n      <div class=\"affirmation-box\" id=\"affirmationBox\">üåü Your daily affirmation will show here.</div>\n    </div>\n    <div class=\"section\">\n      <h2>Mindful Breathing</h2>\n      <div class=\"breathe-box\">\n        <p>Follow the circle. Inhale... Exhale...</p>\n        <div class=\"circle\"></div>\n      </div>\n    </div>\n    <div class=\"section\">\n      <h2>Reflection</h2>\n      <div class=\"quote-box\">\n        \"Even on the hardest days, I made time to breathe, reflect, and reset.\"\n      </div>\n      <textarea placeholder=\"Write your thoughts here...\"></textarea>\n    </div>\n    <div class=\"section\">\n      <h2>Focus Tracker</h2>\n      <div class=\"checkbox-group\">\n        <label><input type=\"checkbox\"> Eat mindfully</label>\n        <label><input type=\"checkbox\"> Unplug for 1 hour</label>\n        <label><input type=\"checkbox\"> Compliment yourself</label>\n      </div>\n    </div>\n    <div class=\"section\">\n      <h2>Wind-Down Checklist</h2>\n      <div class=\"winddown-box\" id=\"windDownChecklist\">üåô Your night routine checklist will appear here after 7PM.</div>\n    </div>\n    <div class=\"section\">\n      <h2>Coping Chart</h2>\n      <canvas id=\"stressChartCanvas\"></canvas>\n    </div>\n  </div>\n  <script>\n    // Declare weather API key only once\n    const weatherApiKey = 'ddc3ba1703bde1ca03ae05e232c14db5';\n    \n    // Function to update theme and add animation based on weather description\n    function updateWeatherTheme(weatherDescription) {\n      let bgTheme = \"linear-gradient(to bottom right, #e3f2fd, #fce4ec)\";\n      let animationClass = \"\";\n      \n      if (weatherDescription.toLowerCase().includes(\"rain\")) {\n        bgTheme = \"linear-gradient(to bottom right, #90a4ae, #eceff1)\";\n        animationClass = \"rain-animation\";\n      } else if (weatherDescription.toLowerCase().includes(\"cloud\")) {\n        bgTheme = \"linear-gradient(to bottom right, #CFD8DC, #ECEFF1)\";\n        animationClass = \"cloud-animation\";\n      } else if (weatherDescription.toLowerCase().includes(\"clear\")) {\n        bgTheme = \"linear-gradient(to bottom right, #FFF8E1, #FFECB3)\";\n        animationClass = \"sunshine-animation\";\n      }\n      document.body.style.setProperty('--bg-gradient', bgTheme);\n      const weatherBox = document.getElementById(\"weatherTip\");\n      if (weatherBox) {\n        weatherBox.classList.remove(\"rain-animation\", \"cloud-animation\", \"sunshine-animation\");\n        if (animationClass) {\n          weatherBox.classList.add(animationClass);\n        }\n      }\n    }\n    \n    // CSS for weather animations\n    const style = document.createElement('style');\n    style.innerHTML = `\n      .rain-animation {\n        animation: rainEffect 2s infinite;\n      }\n      @keyframes rainEffect {\n        0% { transform: translateY(0px); opacity: 1; }\n        50% { transform: translateY(5px); opacity: 0.8; }\n        100% { transform: translateY(0px); opacity: 1; }\n      }\n      .cloud-animation {\n        animation: cloudDrift 5s infinite linear;\n      }\n      @keyframes cloudDrift {\n        0% { transform: translateX(0px); }\n        50% { transform: translateX(10px); }\n        100% { transform: translateX(0px); }\n      }\n      .sunshine-animation {\n        animation: sunshineGlow 3s infinite alternate;\n      }\n      @keyframes sunshineGlow {\n        from { filter: brightness(1); }\n        to { filter: brightness(1.2); }\n      }\n    `;\n    document.head.appendChild(style);\n    \n    // Function to fetch weather data using geolocation if available\n    function fetchWeather() {\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(\n          function(position) {\n            const lat = position.coords.latitude;\n            const lon = position.coords.longitude;\n            const weatherUrl = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${weatherApiKey}&units=metric`;\n            fetch(weatherUrl)\n              .then(response => response.json())\n              .then(data => {\n                const weatherDescription = data.weather[0].description;\n                const temperature = data.main.temp;\n                let weatherMsg = \"\";\n                if (weatherDescription.toLowerCase().includes(\"rain\")) {\n                  weatherMsg = `üåßÔ∏è ${temperature}¬∞C - ${weatherDescription}. Don't forget your umbrella!`;\n                } else if (weatherDescription.toLowerCase().includes(\"cloud\")) {\n                  weatherMsg = `‚òÅÔ∏è ${temperature}¬∞C - ${weatherDescription}. A great day for gentle reflection.`;\n                } else if (weatherDescription.toLowerCase().includes(\"clear\")) {\n                  weatherMsg = `‚òÄÔ∏è ${temperature}¬∞C - ${weatherDescription}. Enjoy the sunshine!`;\n                } else {\n                  weatherMsg = `üå§Ô∏è ${temperature}¬∞C - ${weatherDescription}.`;\n                }\n                document.getElementById(\"weatherTip\").innerText = weatherMsg;\n                updateWeatherTheme(weatherDescription);\n              })\n              .catch(error => {\n                document.getElementById(\"weatherTip\").innerText = \"üåßÔ∏è Could not fetch weather data\";\n              });\n          },\n          function(error) {\n            // Fallback: use static city (London)\n            const weatherUrl = `https://api.openweathermap.org/data/2.5/weather?q=London&appid=${weatherApiKey}&units=metric`;\n            fetch(weatherUrl)\n              .then(response => response.json())\n              .then(data => {\n                const weatherDescription = data.weather[0].description;\n                const temperature = data.main.temp;\n                let weatherMsg = \"\";\n                if (weatherDescription.toLowerCase().includes(\"rain\")) {\n                  weatherMsg = `üåßÔ∏è ${temperature}¬∞C - ${weatherDescription}. Don't forget your umbrella!`;\n                } else if (weatherDescription.toLowerCase().includes(\"cloud\")) {\n                  weatherMsg = `‚òÅÔ∏è ${temperature}¬∞C - ${weatherDescription}. A great day for gentle reflection.`;\n                } else if (weatherDescription.toLowerCase().includes(\"clear\")) {\n                  weatherMsg = `‚òÄÔ∏è ${temperature}¬∞C - ${weatherDescription}. Enjoy the sunshine!`;\n                } else {\n                  weatherMsg = `üå§Ô∏è ${temperature}¬∞C - ${weatherDescription}.`;\n                }\n                document.getElementById(\"weatherTip\").innerText = weatherMsg;\n                updateWeatherTheme(weatherDescription);\n              })\n              .catch(error => {\n                document.getElementById(\"weatherTip\").innerText = \"üåßÔ∏è Could not fetch weather data\";\n              });\n          }\n        );\n      } else {\n        // Geolocation not supported, fallback to static city (London)\n        const weatherUrl = `https://api.openweathermap.org/data/2.5/weather?q=London&appid=${weatherApiKey}&units=metric`;\n        fetch(weatherUrl)\n          .then(response => response.json())\n          .then(data => {\n            const weatherDescription = data.weather[0].description;\n            const temperature = data.main.temp;\n            let weatherMsg = \"\";\n            if (weatherDescription.toLowerCase().includes(\"rain\")) {\n              weatherMsg = `üåßÔ∏è ${temperature}¬∞C - ${weatherDescription}. Don't forget your umbrella!`;\n            } else if (weatherDescription.toLowerCase().includes(\"cloud\")) {\n              weatherMsg = `‚òÅÔ∏è ${temperature}¬∞C - ${weatherDescription}. A great day for gentle reflection.`;\n            } else if (weatherDescription.toLowerCase().includes(\"clear\")) {\n              weatherMsg = `‚òÄÔ∏è ${temperature}¬∞C - ${weatherDescription}. Enjoy the sunshine!`;\n            } else {\n              weatherMsg = `üå§Ô∏è ${temperature}¬∞C - ${weatherDescription}.`;\n            }\n            document.getElementById(\"weatherTip\").innerText = weatherMsg;\n            updateWeatherTheme(weatherDescription);\n          })\n          .catch(error => {\n            document.getElementById(\"weatherTip\").innerText = \"üåßÔ∏è Could not fetch weather data\";\n          });\n      }\n    }\n\n    function personalizeDashboard() {\n      const hour = new Date().getHours();\n      const mood = localStorage.getItem('mood');\n      \n      let greeting = hour < 12 ? \"Good Morning!\" : hour < 18 ? \"Good Afternoon!\" : \"Good Evening!\";\n      document.getElementById(\"greeting\").innerText = greeting;\n      \n      const focusOptions = [\"Hydrate regularly\", \"Take 3 deep breaths\", \"Journal for 5 minutes\", \"Unplug and go for a walk\"];\n      document.getElementById(\"focusBox\").innerText = `üéØ Focus of the day: ${focusOptions[Math.floor(Math.random() * focusOptions.length)]}`;\n      \n      let support = \"üí¨ How are you feeling today?\";\n      if (mood === \"üò¢\" || mood === \"üò†\") support = \"It's okay to feel this way. Take a pause and be gentle with yourself.\";\n      else if (mood === \"üòä\") support = \"You're glowing today. Keep the good vibes flowing!\";\n      else if (mood === \"üò¥\") support = \"You might need some extra rest and downtime.\";\n      document.getElementById(\"emotionSupport\").innerText = support;\n      \n      let energyLevel = hour < 11 ? \"High\" : hour < 17 ? \"Medium\" : \"Low\";\n      document.getElementById(\"energyEstimate\").innerText = `‚ö° Estimated Energy: ${energyLevel}`;\n      \n      // Fetch real weather data based on geolocation\n      fetchWeather();\n      \n      let bgTheme = \"linear-gradient(to bottom right, #e3f2fd, #fce4ec)\";\n      if (mood === \"üò¥\") bgTheme = \"linear-gradient(to bottom right, #cfd8dc, #eceff1)\";\n      if (hour >= 19) bgTheme = \"linear-gradient(to bottom right, #bcaaa4, #efebe9)\";\n      document.body.style.setProperty('--bg-gradient', bgTheme);\n      \n      if (hour >= 19) {\n        document.getElementById(\"windDownChecklist\").innerHTML = `\n          <strong>Night Routine:</strong><br>\n          ‚òëÔ∏è Turn off screens early<br>\n          ‚òëÔ∏è Stretch or reflect<br>\n          ‚òëÔ∏è Express gratitude\n        `;\n      }\n    }\n    \n    function selectMood(mood) {\n      document.getElementById('selectedMood').innerText = `Today's mood: ${mood}`;\n      localStorage.setItem('mood', mood);\n      personalizeDashboard();\n    }\n    \n    function generateAffirmation() {\n      const affirmations = [\n        \"I am doing the best I can, and that is enough.\",\n        \"I take time to care for my mind and body.\",\n        \"Challenges help me grow stronger.\",\n        \"I deserve rest and kindness.\",\n        \"Wellbeing is a journey, not a destination.\"\n      ];\n      const random = affirmations[Math.floor(Math.random() * affirmations.length)];\n      document.getElementById('affirmationBox').innerText = random;\n    }\n    \n    function updateEncouragement() {\n      const checkboxes = document.querySelectorAll('.checkbox-group input[type=\"checkbox\"]');\n      let checkedCount = 0;\n      checkboxes.forEach(cb => { if (cb.checked) checkedCount++; });\n      let msg = '';\n      if (checkedCount === 0) msg = \"ü§ç Be kind to yourself‚Äîtomorrow‚Äôs a new chance.\";\n      else if (checkedCount < 3) msg = \"üå± Nice work, you're making progress.\";\n      else msg = \"üí™ You‚Äôre on fire today!\";\n      document.getElementById('encouragement').innerText = msg;\n    }\n    \n    const chartCanvas = document.getElementById('stressChartCanvas').getContext('2d');\n    const stressChart = new Chart(chartCanvas, {\n      type: 'bar',\n      data: {\n        labels: ['Rest', 'Movement', 'Support', 'Reflection'],\n        datasets: [{\n          label: 'Coping Activity (%)',\n          data: [70, 50, 40, 60],\n          backgroundColor: ['#ffb74d', '#ff8a65', '#ffcc80', '#ffab91'],\n          borderRadius: 6\n        }]\n      },\n      options: {\n        responsive: true,\n        scales: {\n          y: {\n            beginAtZero: true,\n            max: 100\n          }\n        }\n      }\n    });\n    \n    window.addEventListener('DOMContentLoaded', personalizeDashboard);\n  </script>\n</body>\n</html>
